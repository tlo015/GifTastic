<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>GifTastic</title>
</head>
<body>

    <!-- container to hold the buttons  -->
    <div class="container">
        <div id="gif-buttons"></div>
    </div>
    
    <!-- search form  -->
    <div class="container">
        <form id="gif-form">
            <label for="animal-input"> Add an animal</label>
            <input type="text" id="animal-input">
        </form>
        <input id="add-animal" type="submit" value="Submit">
    </div>

    <!-- container to hold gifs -->
    <div class="container">
        <div id="gif-pics"></div>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
    // create an array of animals that will dynamically be displayed on the top of the screen. 
    // array [];
    var animalArr = ["dog", "cat", "rabbit", "hamster", "skunk", "goldfish", "bird", "ferret", "turtle", "sugar glider", "chinchilla", "hedgehog", "hermit crab", "gerbil", "pygmy goat", "chicken", "capybara", " teacup pig", "serval", "salamander", "frog"]

    // render each as a button that on click will display gifs of the animal 
    //     function renderButtons 
    //         for loop through array 
    //         element button 
    //         add class and attr and data-name[i]and text[i]
    //         append to div
    function displayButtons() {
        $("#gif-buttons").empty();
        for (var i=0; i<animalArr.length; i++) {
            console.log ("animals: ", animalArr[i]);
            var animalBtn = $("<button>");
            animalBtn.addClass("animal-btn");
            animalBtn.attr("data-name", animalArr[i]);
            animalBtn.text(animalArr[i]);
            $("#gif-buttons").append(animalBtn);
        }
    }

    // allows you to add buttons to the end of the string that will also display gifs when clicked 
    //     on click event 
    //     var storing the user input 
    //     .push to add the movie to the end of the array 
    //     make button 
    $("#add-animal").on("click", function() {
        var newAnimal=$("#animal-input").val().trim();
        animalArr.push(newAnimal);
        displayButtons();
    });
 


    // sign up for an gifphy API 
    // function to display appropriate content 
    //queryURL
    function displayAnimals() {
        var animal = $(this).attr("data-name");
        var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +animal+ "&api_key=Lz8M8QghYuocQVkTxFRQ73XjYNlvmmVP&limit=10";
        $.ajax({
            url: queryURL,
            method: "GET"
        }).then(function(response) {
            var results = response.data;
            for (var i=0; i<results.length; i++) {
                var gifDiv = $("<div>");
                
                var rating = results[i].rating;
                var p = $("<p>").text("Rating: " +rating);
                
                var animalImg = $("<img>");
                animalImg.attr("src", results[i].images.fixed_height_still.url);
                //when gifs are displayed to screen, they are still - data still, data animate, data state 
                animalImg.attr("data-still", results[i].images.fixed_height_still.url);
                animalImg.attr("data-animate", results[i].images.fixed_height.url);
                animalImg.attr("data-state", "still");
                animalImg.addClass("gifImg")

                gifDiv.append(p);
                gifDiv.append(animalImg);
                $("#gif-pics").prepend(gifDiv);
            }
        });
    }

    $(document).on("click", ".animal-btn", displayAnimals);
    displayButtons();

    $(document).on("click", ".gifImg", function() {
        var state=$(this).attr("data-state");
        if(state === "still"){
            $(this).attr("src", $(this).attr("data-animate"));
            $(this).attr("data-state", "animate");
        } else{
            $(this).attr("src", $(this).attr("data-still"));
            $(this).attr("data-state", "still");
        }
    });
     
    // when gifs are rendered to the page, they are paused. 
    // upon click, they play 
    //     data-states - still 
    //     if else, 
    // each click results prepends the previous results  
    // search bar 
    
</script>
</body>
</html>
